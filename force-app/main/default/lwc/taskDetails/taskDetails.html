<template>
    <lightning-card title={task.title} icon-name="custom:custom62">
        <div slot="actions">
            <lightning-button-icon-stateful
                class="mark-as-important-btn"
                icon-name="utility:favorite"
                selected={task.isImportant}
                alternative-text="Mark as important"
                onclick={markAsImportant}>
            </lightning-button-icon-stateful>
        </div>

        <section class="task-details-content-section">
            <div if:true={task.details.steps}>
                <template for:each={task.details.steps} for:item="step">
                    <c-task-step key={step.Id} step={step}></c-task-step>
                </template>
            </div>

            <!-- <div if:false={task.details.steps}>
                <span>No steps mentioned</span>
            </div> -->

            <div class="slds-p-around_medium">
                <c-create-form
                    btn-label = "New step"
                    input-label = "Step name"
                    onsave = {handleAddStep}>
                </c-create-form>
            </div>
        </section>

        <section class="task-details-content-section">  
            <button class="task-detail-action-btn">
                <lightning-icon icon-name="utility:dayview" size="small" alternative-text="Day"></lightning-icon>
                Add to "My day"
            </button>
        </section>

        <section class="task-details-content-section">
            <button class="task-detail-action-btn task-detail-action-btn--bordered">
                <lightning-icon icon-name="utility:reminder" size="small" alternative-text="Reminder"></lightning-icon>
                <div>
                    <span if:false={task.details.remind}>Add a reminder</span>

                    <span if:true={task.details.remind}>
                        <strong>Remind me on <lightning-formatted-date-time value={task.details.remind}></lightning-formatted-date-time></strong>
                    </span>
                </div>
                <lightning-button-icon
                    class="remove-btn"
                    variant="bare"
                    icon-name="utility:close"
                    alternative-text="Remove"
                    if:true={task.details.remind}
                    onclick={removeReminder}>
                </lightning-button-icon>
            </button>
            <button class="task-detail-action-btn task-detail-action-btn--bordered">
                <lightning-icon icon-name="utility:date_time" size="small" alternative-text="Deadline"></lightning-icon> 
                <div>
                    <span if:false={task.details.deadline}>Add a deadline</span>

                    <span if:true={task.details.deadline}>
                        <strong>Deadline: <lightning-formatted-date-time value={task.details.deadline}></lightning-formatted-date-time></strong>
                    </span>
                </div>
                <lightning-button-icon
                    class="remove-btn"
                    variant="bare"
                    icon-name="utility:close"
                    alternative-text="Remove"
                    if:true={task.details.deadline}
                    onclick={removeDeadline}>
                </lightning-button-icon>
            </button>
        </section>

        <section class="task-details-content-section">
            <div class="add-task-notes-form">
                <lightning-textarea name="Notes" label="" placeholder="Add some notes..."></lightning-textarea>
                <lightning-button-group>
                    <lightning-button name="addNotesBtn" variant="brand" label="Save" disabled></lightning-button>
                </lightning-button-group>
            </div>
        </section>
    </lightning-card>
</template>